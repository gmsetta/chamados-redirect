<!DOCTYPE html>
<html>
<head>
  <title>Desativar Chamado</title>
  <script>
    window.onload = function() {
      const urlParams = new URLSearchParams(window.location.search);
      const ticket = urlParams.get('ticket');
      if (ticket) {
        // Enviar mensagem para o content script da extensão
        window.postMessage({ action: 'desativar', ticket: ticket }, '*');

        // Escutar resposta do content script
        window.addEventListener('message', (event) => {
          if (event.data.action === 'desativarResponse') {
            if (event.data.status === 'success') {
              document.body.innerHTML = '<p>Chamado ' + event.data.ticket + ' enviado para desativação. A extensão processará automaticamente.</p>';
            } else {
              document.body.innerHTML = '<p>Erro ao enviar o chamado ' + event.data.ticket + '. Certifique-se de que a extensão está instalada e ativa.</p>';
            }
          }
        });
      } else {
        document.body.innerHTML = '<p>Nenhum ticket encontrado na URL.</p>';
      }
    };
  </script>
</head>
<body>
  <p>Processando...</p>
</body>
</html>
